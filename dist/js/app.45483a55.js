(function(){var e={6700:function(e,t,n){var a={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function o(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=s,e.exports=o,o.id=6700},4965:function(e,t,n){"use strict";var a=n(9963),o=n(6252);const s={id:"app"},i=(0,o._)("i",{class:"fa fa-download","aria-atomic":"Download"},null,-1),l=(0,o._)("i",{class:"fa fa-upload"},null,-1),r=(0,o._)("i",{class:"fa fa-cogs"},null,-1);function d(e,t,n,a,d,c){const p=(0,o.up)("PromptNode"),g=(0,o.up)("NegativePromptNode"),u=(0,o.up)("ReplacePromptNode"),m=(0,o.up)("ImageNode"),h=(0,o.up)("Background"),f=(0,o.up)("ControlButton"),j=(0,o.up)("Controls"),v=(0,o.up)("VueFlow"),b=(0,o.up)("SettingsModal"),_=(0,o.up)("ShareModal"),y=(0,o.up)("ContextMenu");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(v,{modelValue:d.elements,"onUpdate:modelValue":t[0]||(t[0]=e=>d.elements=e),onDrop:c.dropImage,"default-zoom":1,"max-zoom":2,"min-zoom":.5,"snap-to-grid":!0,"snap-grid":[20,20],"auto-connect":c.connector,"fit-view-on-init":"","zoom-on-double-click":!1,onPaneContextMenu:c.openContextMenu,onPaneClick:c.hideAllModal},{"node-prompt":(0,o.w5)((e=>[(0,o.Wm)(p,(0,o.dG)(e,{onFlag:c.flagWithChildren,onEnhance:c.enhancePrompt,onFork:c.forkNode,onGen:c.makeImageAndGen}),null,16,["onFlag","onEnhance","onFork","onGen"])])),"node-negativeprompt":(0,o.w5)((e=>[(0,o.Wm)(g,(0,o.dG)(e,{onFlag:c.flagWithChildren,onEnhance:c.enhancePrompt,onFork:c.forkNode,onGen:c.makeImageAndGen}),null,16,["onFlag","onEnhance","onFork","onGen"])])),"node-replace":(0,o.w5)((e=>[(0,o.Wm)(u,(0,o.dG)(e,{onFlag:c.flagWithChildren,onEnhance:c.enhancePrompt,onFork:c.forkNode}),null,16,["onFlag","onEnhance","onFork"])])),"node-image":(0,o.w5)((e=>[(0,o.Wm)(m,(0,o.dG)(e,{onFlag:c.flagWithChildren,onEnhance:c.enhanceImage,onAdd:c.imageAddNode,onReplace:c.imageReplaceNode,onRegen:c.regenNode}),null,16,["onFlag","onEnhance","onAdd","onReplace","onRegen"])])),default:(0,o.w5)((()=>[(0,o.Wm)(h),(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,{onClick:c.downloadProject},{default:(0,o.w5)((()=>[i])),_:1},8,["onClick"]),(0,o.Wm)(f,{onClick:c.uploadProject},{default:(0,o.w5)((()=>[l])),_:1},8,["onClick"]),(0,o.Wm)(f,{onClick:c.toggleSettingsModal},{default:(0,o.w5)((()=>[r])),_:1},8,["onClick"])])),_:1})])),_:1},8,["modelValue","onDrop","auto-connect","onPaneContextMenu","onPaneClick"]),(0,o.Wm)(b,{data:d.settings},null,8,["data"]),(0,o.Wm)(_,{data:d.share,onDownload:c.downloadProject},null,8,["data","onDownload"]),(0,o.Wm)(y,{is_visible:d.contextMenu.is_visible,x:d.contextMenu.x,y:d.contextMenu.y,nodeTypes:d.contextNodeTypes,onAddNode:c.addNode},null,8,["is_visible","x","y","nodeTypes","onAddNode"])])}var c=n(6154),p=n(2262),g=n(5330),u=n(8831),m=n(3236),h=n(3577);const f=e=>((0,o.dD)("data-v-75815d47"),e=e(),(0,o.Cn)(),e),j=f((()=>(0,o._)("label",{class:"image-node-label"},"IMAGE",-1))),v=["v-model"],b=f((()=>(0,o._)("i",{class:"fa fa-flag"},null,-1))),_=[b],y=f((()=>(0,o._)("i",{class:"fa fa-refresh"},null,-1))),w=[y],k={class:"image-node"},x=["src","alt"];function C(e,t,n,a,s,i){const l=(0,o.up)("NodeToolbar"),r=(0,o.up)("Handle");return(0,o.wg)(),(0,o.iD)("div",{class:(0,h.C_)(["image-node-container",n.data.flag])},[j,(0,o.Wm)(l,{"is-visible":n.selected,position:s.toolbarPosition},{default:(0,o.w5)((()=>[(0,o._)("button",{"v-model":n.data.flag,onClick:t[0]||(t[0]=t=>e.$emit("flag",n.id)),class:(0,h.C_)(n.data.flag)},_,10,v),(0,o._)("button",{onClick:t[1]||(t[1]=t=>e.$emit("regen",n.id))},w)])),_:1},8,["is-visible","position"]),(0,o._)("div",k,[n.data.src?((0,o.wg)(),(0,o.iD)("img",{key:0,src:n.data.src,alt:n.data.alt},null,8,x)):((0,o.wg)(),(0,o.iD)("i",{key:1,class:(0,h.C_)(["regen-button fa fa-refresh fa-3x",{"fa-spin":n.data.generating}]),onClick:t[2]||(t[2]=(...e)=>i.triggerRegen&&i.triggerRegen(...e))},null,2))]),(0,o.Wm)(r,{type:"target",position:s.targetPosition},null,8,["position"]),(0,o.Wm)(r,{type:"source",position:s.sourcePosition},null,8,["position"])],2)}var N=n(8648),P={name:"ImageNode",props:{id:String,data:Object,selected:Boolean},data(){return{toolbarPosition:g.Ly.Bottom,targetPosition:g.Ly.Top,sourcePosition:g.Ly.Bottom}},components:{NodeToolbar:N.M,Handle:g.HH},methods:{triggerRegen(){this.$el.querySelector(".regen-button").classList.add("fa-spin"),this.$emit("regen",this.id)}}},D=n(3744);const M=(0,D.Z)(P,[["render",C],["__scopeId","data-v-75815d47"]]);var I=M;const T=e=>((0,o.dD)("data-v-7114c74a"),e=e(),(0,o.Cn)(),e),$=T((()=>(0,o._)("label",{class:"prompt-node-label"},"PROMPT",-1))),E=T((()=>(0,o._)("i",{class:"fa fa-flag"},null,-1))),O=[E],S=T((()=>(0,o._)("i",{class:"fa fa-arrow-down"},null,-1))),z=[S],R=T((()=>(0,o._)("i",{class:"fa fa-code-fork"},null,-1))),W=[R],A={class:"prompt-node"},L=["placeholder"];function F(e,t,n,s,i,l){const r=(0,o.up)("NodeToolbar"),d=(0,o.up)("Handle");return(0,o.wg)(),(0,o.iD)("div",{class:(0,h.C_)(["prompt-node-container",n.data.flag])},[$,(0,o.Wm)(r,{"is-visible":n.selected,position:i.toolbarPosition},{default:(0,o.w5)((()=>[(0,o._)("button",{onClick:t[0]||(t[0]=t=>e.$emit("flag",n.id))},O),(0,o._)("button",{onClick:t[1]||(t[1]=t=>e.$emit("gen",n.id))},z),(0,o._)("button",{onClick:t[2]||(t[2]=t=>e.$emit("fork",n.id))},W)])),_:1},8,["is-visible","position"]),(0,o._)("div",A,[(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.data.prompt=e),placeholder:n.data.prompt,class:"nowheel nodrag",onInput:t[4]||(t[4]=(...e)=>l.changeRows&&l.changeRows(...e))},null,40,L),[[a.nr,n.data.prompt]]),(0,o.wy)((0,o._)("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[5]||(t[5]=e=>n.data.weight=e),class:"nowheel nodrag"},null,512),[[a.nr,n.data.weight]])]),(0,o.Wm)(d,{type:"target",position:i.targetPosition},null,8,["position"]),(0,o.Wm)(d,{type:"source",position:i.sourcePosition},null,8,["position"])],2)}var H={name:"PromptNode",props:{id:String,data:Object,selected:Boolean},data(){return{toolbarPosition:g.Ly.Bottom,targetPosition:g.Ly.Top,sourcePosition:g.Ly.Bottom}},components:{NodeToolbar:N.M,Handle:g.HH},methods:{changeRows(e){e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"}}};const B=(0,D.Z)(H,[["render",F],["__scopeId","data-v-7114c74a"]]);var U=B;const G=e=>((0,o.dD)("data-v-6756ab72"),e=e(),(0,o.Cn)(),e),V=G((()=>(0,o._)("label",{class:"negative-prompt-node-label"},"NEGATIVE PROMPT",-1))),Z=G((()=>(0,o._)("i",{class:"fa fa-flag"},null,-1))),K=[Z],q=G((()=>(0,o._)("i",{class:"fa fa-arrow-down"},null,-1))),J=[q],X=G((()=>(0,o._)("i",{class:"fa fa-code-fork"},null,-1))),Y=[X],Q={class:"negative-prompt-node"},ee=["placeholder"];function te(e,t,n,s,i,l){const r=(0,o.up)("NodeToolbar"),d=(0,o.up)("Handle");return(0,o.wg)(),(0,o.iD)("div",{class:(0,h.C_)(["negative-prompt-node-container",n.data.flag])},[V,(0,o.Wm)(r,{"is-visible":n.selected,position:i.toolbarPosition},{default:(0,o.w5)((()=>[(0,o._)("button",{onClick:t[0]||(t[0]=t=>e.$emit("flag",n.id))},K),(0,o._)("button",{onClick:t[1]||(t[1]=t=>e.$emit("gen",n.id))},J),(0,o._)("button",{onClick:t[2]||(t[2]=t=>e.$emit("fork",n.id))},Y)])),_:1},8,["is-visible","position"]),(0,o._)("div",Q,[(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.data.prompt=e),placeholder:n.data.prompt,class:"nowheel nodrag",onInput:t[4]||(t[4]=(...e)=>l.changeRows&&l.changeRows(...e))},null,40,ee),[[a.nr,n.data.prompt]]),(0,o.wy)((0,o._)("input",{type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[5]||(t[5]=e=>n.data.weight=e),class:"nowheel nodrag"},null,512),[[a.nr,n.data.weight]])]),(0,o.Wm)(d,{type:"target",position:i.targetPosition},null,8,["position"]),(0,o.Wm)(d,{type:"source",position:i.sourcePosition},null,8,["position"])],2)}var ne={name:"NegativePromptNode",props:{id:String,data:Object,selected:Boolean},data(){return{toolbarPosition:g.Ly.Bottom,targetPosition:g.Ly.Top,sourcePosition:g.Ly.Bottom}},components:{NodeToolbar:N.M,Handle:g.HH},methods:{changeRows(e){e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"}}};const ae=(0,D.Z)(ne,[["render",te],["__scopeId","data-v-6756ab72"]]);var oe=ae;const se=e=>((0,o.dD)("data-v-1d9510aa"),e=e(),(0,o.Cn)(),e),ie={class:"settings-modal"},le=se((()=>(0,o._)("i",{class:"fa fa-window-close"},null,-1))),re=[le],de=se((()=>(0,o._)("h1",null,"Project Title",-1))),ce=se((()=>(0,o._)("h1",null,"Dreamstudio API KEY",-1))),pe=se((()=>(0,o._)("a",{href:"https://platform.stability.ai/rest-api",target:"_blank"},"stability.ai api",-1)));function ge(e,t,n,s,i,l){return n.data.is_visible?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"settings-modal-container",onKeyup:t[3]||(t[3]=(...e)=>l.checkKey&&l.checkKey(...e))},[(0,o._)("div",ie,[(0,o._)("button",{class:"close-button",onClick:t[0]||(t[0]=e=>n.data.is_visible=!n.data.is_visible)},re),de,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>n.data.project_name=e),placeholder:"project name"},null,512),[[a.nr,n.data.project_name]]),ce,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>n.data.api_key=e),placeholder:"apikey"},null,512),[[a.nr,n.data.api_key]]),pe])],32)):(0,o.kq)("",!0)}var ue=n(381),me=n.n(ue),he={name:"SettingsModal",props:{data:Object},data(){return{}},methods:{checkKey(e){"Escape"==e.key&&(this.data.is_visible=!this.data.is_visible)}},components:{},created(){this.moment=me()}};const fe=(0,D.Z)(he,[["render",ge],["__scopeId","data-v-1d9510aa"]]);var je=fe;const ve=e=>((0,o.dD)("data-v-b5ee9d80"),e=e(),(0,o.Cn)(),e),be={class:"share-modal"},_e=ve((()=>(0,o._)("i",{class:"fa fa-window-close"},null,-1))),ye=[_e],we=ve((()=>(0,o._)("h1",null,"Share Project",-1))),ke=ve((()=>(0,o._)("i",{class:"fa fa-download"},null,-1)));function xe(e,t,n,a,s,i){return n.data.is_visible?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"share-modal-container",onKeyup:t[2]||(t[2]=(...e)=>i.checkKey&&i.checkKey(...e))},[(0,o._)("div",be,[(0,o._)("button",{class:"close-button",onClick:t[0]||(t[0]=e=>n.data.is_visible=!n.data.is_visible)},ye),we,(0,o._)("button",{class:"download-button",onClick:t[1]||(t[1]=t=>e.$emit("download"))},[ke,(0,o.Uk)(" download project file ")])])],32)):(0,o.kq)("",!0)}var Ce={name:"ShareModal",props:{data:Object},data(){return{}},methods:{checkKey(e){"Escape"==e.key&&(this.data.is_visible=!this.data.is_visible)}},components:{},created(){this.moment=me()}};const Ne=(0,D.Z)(Ce,[["render",xe],["__scopeId","data-v-b5ee9d80"]]);var Pe=Ne;const De=["onClick"];function Me(e,t,n,a,s,i){return n.is_visible?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"context-menu",style:(0,h.j5)(i.menuStyle)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.nodeTypes,(e=>((0,o.wg)(),(0,o.iD)("div",{class:"context-menu__item",key:e,onClick:t=>i.addNode(e)},(0,h.zw)(e),9,De)))),128))],4)):(0,o.kq)("",!0)}var Ie={props:["is_visible","x","y","nodeTypes"],computed:{menuStyle(){return{left:`${this.x}px`,top:`${this.y}px`}}},methods:{addNode(e){this.$emit("add-node",e)}}};const Te=(0,D.Z)(Ie,[["render",Me],["__scopeId","data-v-aff94042"]]);var $e=Te;const Ee=e=>((0,o.dD)("data-v-365823ac"),e=e(),(0,o.Cn)(),e),Oe=Ee((()=>(0,o._)("label",{class:"replace-prompt-node-label"},"REPLACE",-1))),Se=Ee((()=>(0,o._)("i",{class:"fa fa-flag"},null,-1))),ze=[Se],Re=Ee((()=>(0,o._)("i",{class:"fa fa-snowflake-o"},null,-1))),We=[Re],Ae=Ee((()=>(0,o._)("i",{class:"fa fa-refresh"},null,-1))),Le=[Ae],Fe=Ee((()=>(0,o._)("i",{class:"fa fa-code-fork"},null,-1))),He=[Fe],Be={class:"replace-prompt-node"},Ue=["placeholder"];function Ge(e,t,n,s,i,l){const r=(0,o.up)("NodeToolbar"),d=(0,o.up)("Handle");return(0,o.wg)(),(0,o.iD)("div",{class:(0,h.C_)(["replace-prompt-node-container",n.data.flag])},[Oe,(0,o.Wm)(r,{"is-visible":n.selected,position:i.toolbarPosition},{default:(0,o.w5)((()=>[(0,o._)("button",{onClick:t[0]||(t[0]=t=>e.$emit("flag",n.id))},ze),(0,o._)("button",{onClick:t[1]||(t[1]=t=>e.$emit("enhance",n.id))},We),(0,o._)("button",{onClick:t[2]||(t[2]=t=>e.$emit("regen",n.id))},Le),(0,o._)("button",{onClick:t[3]||(t[3]=t=>e.$emit("fork",n.id))},He)])),_:1},8,["is-visible","position"]),(0,o._)("div",Be,[(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.data.prompt=e),placeholder:n.data.prompt,class:"nowheel nodrag",onInput:t[5]||(t[5]=(...e)=>l.changeRows&&l.changeRows(...e))},null,40,Ue),[[a.nr,n.data.prompt]])]),(0,o.Wm)(d,{type:"target",position:i.targetPosition},null,8,["position"]),(0,o.Wm)(d,{type:"source",position:i.sourcePosition},null,8,["position"])],2)}var Ve={name:"ReplacePromptNode",props:{id:String,data:Object,selected:Boolean},data(){return{toolbarPosition:g.Ly.Bottom,targetPosition:g.Ly.Top,sourcePosition:g.Ly.Bottom}},components:{NodeToolbar:N.M,Handle:g.HH},methods:{changeRows(e){e.target.style.height="auto",e.target.style.height=e.target.scrollHeight+"px"}}};const Ze=(0,D.Z)(Ve,[["render",Ge],["__scopeId","data-v-365823ac"]]);var Ke=Ze;const qe=["","red-flag","blue-flag","green-flag","yellow-flag","orange-flag","purple-flag","pink-flag","brown-flag","black-flag","white-flag"];var Je={name:"App",components:{VueFlow:g.DB,ImageNode:I,PromptNode:U,Controls:m.Z,Background:u.A,ControlButton:m.B,SettingsModal:je,ShareModal:Pe,ContextMenu:$e,ReplacePromptNode:Ke,NegativePromptNode:oe},data(){return{nodeTypes:{image:(0,p.Xl)(I),prompt:(0,p.Xl)(U),replace:(0,p.Xl)(Ke),negativeprompt:(0,p.Xl)(oe)},contextMenu:{is_visible:!1,x:0,y:0},contextNodeTypes:["image","prompt","negativeprompt"],settings:{engine_id:"stable-diffusion-xl-beta-v2-2-2",is_visible:!1,api_key:"",project_name:"My Project",created_at:new Date,updated_at:new Date},share:{users:[{email:"123@demo.com",active:!1},{email:"1321@demo.com",active:!1}],use_password:!1,password:"",is_visible:!1},elements:[]}},computed:{countNodes(){return this.elements.filter((e=>!e.source)).length},countEdges(){return this.elements.filter((e=>e.source)).length},countElements(){return this.elements.length},largestNodeID(){const e=this.elements.filter((e=>!e.source));if(0===e.length)return 0;const t=e.map((e=>parseInt(e.id)));return Math.max(...t)}},mounted(){this.loadLocalStorage();var e=this;c.Z.get("default.json").then((e=>{this.elements=e.data.elements,this.settings=e.data.settings,this.share=e.data.share})).then((function(t){const n=new URLSearchParams(window.location.search);var a=n.get("key");a&&(e.settings.api_key=a,console.log("set api key",e.settings.api_key)),""===e.settings.api_key&&(e.settings.is_visible=!0),""===e.settings.project_name&&(e.settings.project_name=e.makeProjectTitle()),e.settings.created_at=new Date,e.settings.updated_at=new Date})).catch((function(e){console.log(e)}))},created(){window.addEventListener("dragover",(e=>{e.preventDefault()}),!1),window.addEventListener("drop",(e=>{e.preventDefault()}),!1)},methods:{dropImage(e){if(e.preventDefault(),console.log("dropping "),e.dataTransfer.items)for(let t=0;t<e.dataTransfer.items.length;t++)if("file"===e.dataTransfer.items[t].kind){let n=e.dataTransfer.items[t].getAsFile();if(n.type.startsWith("image/")){let t={x:e.clientX,y:e.clientY};this.contextMenu.is_visible=!1,this.elements.forEach((e=>{e.selected=!1}));let a=new FileReader;a.onloadend=()=>{let e=new Image;e.onload=()=>{let n=document.createElement("canvas"),a=n.getContext("2d");n.width=64*Math.round(e.width/64),n.height=64*Math.round(e.height/64),a.drawImage(e,0,0,n.width,n.height);let o=n.toDataURL();this.elements.push({id:`${this.largestNodeID+1}`,label:`image ${this.largestNodeID+1}`,type:"image",position:t,data:{src:o,alt:"uploaded file"},selected:!0})},e.src=a.result},a.readAsDataURL(n)}}},makeProjectTitle(){var e=["cat","summer","french","powder","whiskey","sunset","ocean","autumn","never","soon","dreamboat","fun","laughter","mountain","candle","breeze","delicious","moonlight","chocolate","paradise","harmony","adventure","serenade","jubilant","melody","blissful","serendipity","enchanted","wanderlust","sparkle","crimson","fireworks","velvet","giggles","pizza","sugar","sunshine","rainbow"],t=[];for(let a=0;a<3;a++){var n=Math.floor(Math.random()*e.length);t.push(e[n])}return t.join("-")},connector(e){if(console.log(e),e.source===e.target)return!1;let t=!1,n=this.elements.find((t=>t.id===e.target)).type,a=this.elements.find((t=>t.id===e.source)).type;if("replace"===n&&"image"!==a||"replace"===n&&"image"===a)return console.log("replace node can only be connected to a source image node"),!1;console.log("making edge");let o={id:`edge-${e.source}-${e.target}`,source:e.source,target:e.target,animated:t};return console.log(o),o},addNode(e){console.log("adding node",e);let t={x:this.contextMenu.x,y:this.contextMenu.y};this.contextMenu.is_visible=!1,this.elements.forEach((e=>{e.selected=!1})),this.elements.push({id:`${this.largestNodeID+1}`,label:`${e} ${this.largestNodeID+1}`,type:e,position:t,data:{flag:""},selected:!0})},openContextMenu(e){e.preventDefault(),console.log(e),this.contextMenu.x=e.x,this.contextMenu.y=e.y,this.contextMenu.is_visible=!0},hideAllModal(){this.contextMenu.is_visible=!1,this.settings.is_visible=!1,this.share.is_visible=!1},saveLocalStorage(){console.log("saving..."),localStorage.setItem("flow-settings",JSON.stringify(this.settings))},loadLocalStorage(){const e=localStorage.getItem("flow-settings");e&&(this.settings=JSON.parse(e))},downloadProject(){this.saveLocalStorage();const e={settings:this.settings,elements:this.elements,share:this.share},t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",`${this.settings.project_name}.json`),document.body.appendChild(n),n.click(),n.remove()},uploadProject(){const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{const t=e.target.files[0],n=new FileReader;n.readAsText(t,"UTF-8"),n.onload=e=>{const t=e.target.result,n=JSON.parse(t);this.elements=n.elements,this.settings=n.settings,this.share=n.share}},e.click()},undo(){},toggleSettingsModal(){this.settings.is_visible=!this.settings.is_visible,this.settings.is_visible&&(this.share.is_visible=!1)},toggleShareModal(){this.share.is_visible=!this.share.is_visible,this.share.is_visible&&(this.settings.is_visible=!1)},forkNode(e){console.log("forking node",e);const t=this.elements.find((t=>t.id===e)),n=JSON.parse(JSON.stringify(t));n.id=`${this.largestNodeID+1}`,n.position.x+=150,n.position.y+=150,this.elements.push(n),this.elements.push({id:`edge-${t.id}-${n.id}`,source:t.id,target:n.id,animated:!1}),t.selected=!1,n.selected=!0},regenNode(e){console.log("regen node"),console.log("default is text to image"),void 0===this.settings.engine_id&&(this.settings.engine_id="stable-diffusion-xl-beta-v2-2-2");let t=this.elements.find((t=>t.id===e));t.data.generating=!0,t.data.src=!1,t.data.alt=this.settings.project_name;let n=this.elements.filter((t=>t.target===e)),a=n.map((e=>this.elements.find((t=>t.id===e.source)))),o=a.filter((e=>"prompt"===e.type)),s=a.filter((e=>"negativeprompt"===e.type)),i=a.filter((e=>"image"===e.type)),l=[];for(let _=0;_<o.length;_++){var r={};r.text=o[_].data.prompt,void 0==o[_].data.weight?r.weight=.5:r.weight=1*o[_].data.weight,l.push(r)}for(let y=0;y<s.length;y++){r={};r.text=s[y].data.prompt,void 0==s[y].data.weight?r.weight=-.5:r.weight=-1*s[y].data.weight,l.push(r)}var d={height:512,width:512,text_prompts:l,cfg_scale:7,clip_guidance_preset:"NONE",samples:1,steps:30},p={Authorization:"Bearer "+this.settings.api_key,"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"};console.log("text-to-image payload",g);var g=null,u="https://api.stability.ai/v1/generation/"+this.settings.engine_id+"/text-to-image";if(i.length>0){p["Content-Type"]="multipart/form-data",u="https://api.stability.ai/v1/generation/"+this.settings.engine_id+"/image-to-image";var m=i[0].data.src,h=m.replace(/^data:(.*);base64,/,""),f="image/png",j=w(h,f);function w(e,t){t=t||"";for(var n=1024,a=window.atob(e),o=[],s=0,i=a.length;s<i;s+=n){for(var l=a.slice(s,s+n),r=new Array(l.length),d=0;d<l.length;d++)r[d]=l.charCodeAt(d);var c=new Uint8Array(r);o.push(c)}return new Blob(o,{type:t})}for(var v=new FormData,b=0;b<l.length;b++)v.append(`text_prompts[${b}][text]`,l[b].text),v.append(`text_prompts[${b}][weight]`,l[b].weight);v.append("cfg_scale",7),v.append("clip_guidance_preset","NONE"),v.append("samples",1),v.append("steps",30),v.append("init_image",j),v.append("init_image_mode","IMAGE_STRENGTH"),v.append("image_strength",.35),g=v}else g=d;c.Z.post(u,g,{headers:p}).then((e=>{e.data.artifacts.forEach((e=>{if("SUCCESS"==e.finishReason){var n="data:image/png;base64,"+e.base64;t.data.src=n,t.data.alt=`${this.settings.project_name}-${t.id}`}}))})).catch((function(e){console.log(e)})).finally((function(){t.data.generating=!1}))},makeImageAndGen(e){console.log("make image and gen");let t=this.elements.find((t=>t.id===e)),n={id:`${this.largestNodeID+1}`,label:`image ${this.largestNodeID+1}`,type:"image",position:{x:t.position.x,y:t.position.y+250},data:{src:!1,alt:this.settings.project_name,generating:!0},selected:!0};t.selected=!1,this.elements.push(n),this.elements.push({id:`edge-${t.id}-${n.id}`,source:t.id,target:n.id,animated:!1}),this.regenNode(n.id)},enhancePrompt(e){console.log("enhance prompt")},enhanceImage(e){console.log("enhance image")},imageAddNode(e){console.log("add node")},imageReplaceNode(e){console.log("replace node")},flagCycle(e){let t=qe.indexOf(e.data.flag);t===qe.length-1?t=0:t++,e.data.flag=qe[t]},flagWithChildren(e){const t=this.elements.find((t=>t.id===e));this.flagCycle(t);const n=qe.indexOf(t.data.flag),a=this.elements.filter((t=>t.source===e)),o=a.map((e=>this.elements.find((t=>t.id===e.target))));o.forEach((e=>{e.data.flag=qe[n]}))}}};const Xe=(0,D.Z)(Je,[["render",d]]);var Ye=Xe;(0,a.ri)(Ye).mount("#app")}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var s=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.loaded=!0,s.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,s){if(!a){var i=1/0;for(c=0;c<e.length;c++){a=e[c][0],o=e[c][1],s=e[c][2];for(var l=!0,r=0;r<a.length;r++)(!1&s||i>=s)&&Object.keys(n.O).every((function(e){return n.O[e](a[r])}))?a.splice(r--,1):(l=!1,s<i&&(i=s));if(l){e.splice(c--,1);var d=o();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,o,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,s,i=a[0],l=a[1],r=a[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(r)var c=r(n)}for(t&&t(a);d<i.length;d++)s=i[d],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},a=self["webpackChunkcascade"]=self["webpackChunkcascade"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(4965)}));a=n.O(a)})();
//# sourceMappingURL=app.45483a55.js.map